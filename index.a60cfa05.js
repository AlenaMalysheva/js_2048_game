!function(){var t=new(function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.boardSize=4,this.board=t||this.createEmptyBoard(),this.score=0,this.status="idle"}return t=[{key:"createEmptyBoard",value:function(){for(var t=[],e=0;e<this.boardSize;e++)t.push(Array(this.boardSize).fill(0));return t}},{key:"moveLeft",value:function(){if("playing"===this.status){for(var t=!1,e=0;e<this.boardSize;e++){var r=this.compressRow(this.board[e]);this.board[e].toString()!==r.toString()&&(t=!0,this.board[e]=r)}t&&(this.addRandomTile(),this.isGameOver()?this.status="lose":this.isWin()&&(this.status="win"))}}},{key:"moveRight",value:function(){this.board=this.board.map(function(t){return t.reverse()}),this.moveLeft(),this.board=this.board.map(function(t){return t.reverse()})}},{key:"moveUp",value:function(){this.transpose(),this.moveLeft(),this.transpose()}},{key:"moveDown",value:function(){this.transpose(),this.moveRight(),this.transpose()}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){"idle"===this.status&&(this.score=0,this.status="playing",this.board=this.createEmptyBoard(),this.addRandomTile(),this.addRandomTile())}},{key:"restart",value:function(){this.status="idle",this.board=this.createEmptyBoard(),this.score=0,this.start()}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.boardSize;e++)for(var r=0;r<this.boardSize;r++)0===this.board[e][r]&&t.push({x:e,y:r});if(t.length>0){var s=t[Math.floor(Math.random()*t.length)],a=s.x,i=s.y;this.board[a][i]=.9>Math.random()?2:4}}},{key:"compressRow",value:function(t){for(var e=t.filter(function(t){return 0!==t}),r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,this.score+=e[r],e[r+1]=0);for(e=e.filter(function(t){return 0!==t});e.length<this.boardSize;)e.push(0);return e}},{key:"transpose",value:function(){for(var t=this.createEmptyBoard(),e=0;e<this.boardSize;e++)for(var r=0;r<this.boardSize;r++)t[e][r]=this.board[r][e];this.board=t}},{key:"isWin",value:function(){return this.board.flat().includes(2048)}},{key:"isGameOver",value:function(){if(this.board.flat().includes(0))return!1;for(var t=0;t<this.boardSize;t++)for(var e=0;e<this.boardSize-1;e++)if(this.board[t][e]===this.board[t][e+1]||this.board[e][t]===this.board[e+1][t])return!1;return!0}}],function(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(e.prototype,t),e}()),e=document.querySelector(".game-score"),r=document.querySelector(".start"),s=document.querySelector(".message-start"),a=document.querySelector(".message-win"),i=document.querySelector(".message-lose"),o=Array.from(document.querySelectorAll(".field-cell"));function n(){var r=t.getState();e.textContent=t.getScore(),o.forEach(function(t,e){var s=r[Math.floor(e/4)][e%4];t.textContent=s>0?s:"",t.className="field-cell",s>0&&t.classList.add("field-cell--".concat(s))}),"win"===t.getStatus()?a.classList.remove("hidden"):"lose"===t.getStatus()&&i.classList.remove("hidden")}document.addEventListener("keydown",function(e){if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){switch(e.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown()}n()}}),r.addEventListener("click",function(){t.start(),s.classList.add("hidden"),a.classList.add("hidden"),i.classList.add("hidden"),r.textContent="Restart",r.classList.add("restart"),r.classList.remove("start"),n()}),r.addEventListener("click",function(){t.restart(),n()})}();
//# sourceMappingURL=index.a60cfa05.js.map
